<!DOCTYPE html>

<html>
    <head>
        <title>Cadastrar Mercadoria</title>
        <meta charset="UTF-8">

        <script type="text/javascript" src="/bower_components/jquery/dist/jquery.js"></script>
        <script type="text/javascript">
        	$(document).ready(function(){
        		$('form').submit(function(event){
        			event.preventDefault(); // evita qu o evento continue se propagando, retorno pra mesma tela conde foi chamado
        			var nome = $('#nome')[0].value; //elemento do DOM
        			// var nome = $('#nome').val(); // do ajax
        			// var nome = $('input[name="nome"]'); // pegando pelo input

        			var nome = $('#nome')[0].value;
        			var titulo = $('#titulo')[0].value;
        			var descricao = $('#descricao')[0].value;
        			var imagem = $('#imagem')[0].value;

        			$.ajax( {
        				url: "/mercadoria",
        				dataType: "json",
        				method: "POST",
        				data: {
        					book: location.search.slice(1).split("&")[0].split("=")[1], // quebrando a string em array, pegando o valor 
        					agente: location.search.slice(1).split("&")[1].split("=")[1],
        					nome: nome,
        					titulo: titulo,
        					descricao: descricao,
        					imagem: imagem
        				},

        				success: function(retorno){
        					console.log(retorno);
        				}

        			});
        		});

        	});

        </script>

    </head>
    <body>
    	<div>
			<form action="/mercadoria" method="POST">
				<h3>Cadastrar Mercadoria</h3>
	    		<div>
	    			<label>Nome</label>
					<input type="text" name="nome" id="nome"/>
	    		</div>
	    		<div>
	    			<label>Titulo</label>
					<input type="text" name="titulo" id="titulo" />
	    		</div>
	    		<div>
	    			<label>Descrição</label>
					<input type="text" name="descricao" id="descricao" />
	    		</div>
	    		<div>
	    			<label>Imagem</label>
					<input type="text" name="imagem" id="imagem"/>
	    		</div>
				 <input value="salvar" name="salvar" type="submit">
			</form>

    	</div> 
    	
    </body>
</html>
